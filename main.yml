secrets: secrets.yml

templates:

  common-settings:
    verify_ssl_certificates: yes

  #------------------ Two set of series, one SD and one 720p

  series-input:
    configure_series:
      from:
        inputs:
          - trakt_list:
              username: '{{ secrets.trakt.user }}'
              password: '{{ secrets.trakt.pass }}'
              list: tvshows
              type: shows
      settings:
        quality: webrip+ <720p
    template:
      - common-settings

  series-input-720:
    configure_series:
      from:
        inputs:
          - trakt_list:
              username: '{{ secrets.trakt.user }}'
              password: '{{ secrets.trakt.pass }}'
              list: tvshows_720
              type: shows
      settings:
        quality: HDTV+ 720p
    template:
      - common-settings

  #------------------ Public Torrents

  transmission-settings:
    verify_ssl_certificates: yes
    include: pubfeeds.yml
    content_filter:
      require: 
        - "*.mp4"
        - "*.avi"
        - "*.mkv"
      require_mainfile: yes
    set:
      path: '{{ secrets.transmission.quickpath }}'
      ratio: 0
    template:
      - transmission-rpc

  #------------------- Private Torrents that require Seeding and Extraction

  transmission-settings-seed:
    verify_ssl_certificates: yes
    inputs:
      - rss: { url: '{{ secrets.feeds.seed1 }}', silent: yes }
    content_filter:
      require: 
        - '*.rar'
        - '*.mkv'
        - '*.mp4'
        - '*.avi'
      reject:   
        - '*.wmv'
    set:
      path: '{{ secrets.transmission.seedpath }}'
      ratio: 2
    template: 
      - transmission-rpc
  
  #-------------------- Transmission RPC Template

  transmission-rpc:
    transmission:
      host: '{{ secrets.transmission.host }}'
      port: 8897
      username: '{{ secrets.transmission.user }}'
      password: '{{ secrets.transmission.pass }}'
      content_filename: '{{ series_name }}---Season {{ series_season }}---{{ series_id }}'
      skip_files:
        - '*.nfo'
        - '*.sfv'
        - '*.txt'
        - '*.exe'

tasks:
  torrent-tv-seed:
    template:
      - series-input
      - transmission-settings-seed

  torrent-tv-seed-720:
    template:
      - series-input-720
      - transmission-settings-seed

  torrent-tv:
    template: 
      - series-input
      - transmission-settings

  torrent-tv-720:
    template: 
      - series-input-720
      - transmission-settings
